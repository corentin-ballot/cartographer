var app=function(){"use strict";function e(){}function t(e,t){for(const n in t)e[n]=t[n];return e}function n(e){return e()}function l(){return Object.create(null)}function i(e){e.forEach(n)}function s(e){return"function"==typeof e}function r(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function o(t,...n){if(null==t)return e;const l=t.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}function c(e){let t;return o(e,(e=>t=e))(),t}function a(e,t,n){e.$$.on_destroy.push(o(t,n))}function u(e,t,n,l){if(e){const i=d(e,t,n,l);return e[0](i)}}function d(e,n,l,i){return e[1]&&i?t(l.ctx.slice(),e[1](i(n))):l.ctx}function p(e,t,n,l,i,s,r){const o=function(e,t,n,l){if(e[2]&&l){const i=e[2](l(n));if(void 0===t.dirty)return i;if("object"==typeof i){const e=[],n=Math.max(t.dirty.length,i.length);for(let l=0;l<n;l+=1)e[l]=t.dirty[l]|i[l];return e}return t.dirty|i}return t.dirty}(t,l,i,s);if(o){const i=d(t,n,l,r);e.p(i,o)}}function f(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}function g(e,t){const n={};t=new Set(t);for(const l in e)t.has(l)||"$"===l[0]||(n[l]=e[l]);return n}function m(e,t,n=t){return e.set(n),t}function h(e,t){e.appendChild(t)}function $(e,t,n){e.insertBefore(t,n||null)}function y(e){e.parentNode.removeChild(e)}function v(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function b(e){return document.createElement(e)}function E(e){return document.createTextNode(e)}function x(){return E(" ")}function F(){return E("")}function L(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function A(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function _(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const l in t)null==t[l]?e.removeAttribute(l):"style"===l?e.style.cssText=t[l]:"__value"===l?e.value=e[l]=t[l]:n[l]&&n[l].set?e[l]=t[l]:A(e,l,t[l])}function M(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function C(e,t){e.value=null==t?"":t}function S(e,t,n,l){e.style.setProperty(t,n,l?"important":"")}function T(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];if(l.__value===t)return void(l.selected=!0)}}function O(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function N(e,t,n){e.classList[n?"add":"remove"](t)}let w;function R(e){w=e}function q(){if(!w)throw new Error("Function called outside component initialization");return w}function I(e){q().$$.on_mount.push(e)}const k=[],P=[],D=[],V=[],G=Promise.resolve();let z=!1;function j(){z||(z=!0,G.then(H))}function U(e){D.push(e)}let Y=!1;const B=new Set;function H(){if(!Y){Y=!0;do{for(let e=0;e<k.length;e+=1){const t=k[e];R(t),W(t.$$)}for(R(null),k.length=0;P.length;)P.pop()();for(let e=0;e<D.length;e+=1){const t=D[e];B.has(t)||(B.add(t),t())}D.length=0}while(k.length);for(;V.length;)V.pop()();z=!1,Y=!1,B.clear()}}function W(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(U)}}const K=new Set;let J;function Q(){J={r:0,c:[],p:J}}function X(){J.r||i(J.c),J=J.p}function Z(e,t){e&&e.i&&(K.delete(e),e.i(t))}function ee(e,t,n,l){if(e&&e.o){if(K.has(e))return;K.add(e),J.c.push((()=>{K.delete(e),l&&(n&&e.d(1),l())})),e.o(t)}}function te(e,t){const n={},l={},i={$$scope:1};let s=e.length;for(;s--;){const r=e[s],o=t[s];if(o){for(const e in r)e in o||(l[e]=1);for(const e in o)i[e]||(n[e]=o[e],i[e]=1);e[s]=o}else for(const e in r)i[e]=1}for(const e in l)e in n||(n[e]=void 0);return n}function ne(e){e&&e.c()}function le(e,t,l,r){const{fragment:o,on_mount:c,on_destroy:a,after_update:u}=e.$$;o&&o.m(t,l),r||U((()=>{const t=c.map(n).filter(s);a?a.push(...t):i(t),e.$$.on_mount=[]})),u.forEach(U)}function ie(e,t){const n=e.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function se(t,n,s,r,o,c,a=[-1]){const u=w;R(t);const d=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:o,bound:l(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:n.context||[]),callbacks:l(),dirty:a,skip_bound:!1};let p=!1;if(d.ctx=s?s(t,n.props||{},((e,n,...l)=>{const i=l.length?l[0]:n;return d.ctx&&o(d.ctx[e],d.ctx[e]=i)&&(!d.skip_bound&&d.bound[e]&&d.bound[e](i),p&&function(e,t){-1===e.$$.dirty[0]&&(k.push(e),j(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],d.update(),p=!0,i(d.before_update),d.fragment=!!r&&r(d.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);d.fragment&&d.fragment.l(e),e.forEach(y)}else d.fragment&&d.fragment.c();n.intro&&Z(t.$$.fragment),le(t,n.target,n.anchor,n.customElement),H()}R(u)}class re{$destroy(){ie(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const oe=[];function ce(t,n=e){let l;const i=[];function s(e){if(r(t,e)&&(t=e,l)){const e=!oe.length;for(let e=0;e<i.length;e+=1){const n=i[e];n[1](),oe.push(n,t)}if(e){for(let e=0;e<oe.length;e+=2)oe[e][0](oe[e+1]);oe.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(r,o=e){const c=[r,o];return i.push(c),1===i.length&&(l=n(s)||e),r(t),()=>{const e=i.indexOf(c);-1!==e&&i.splice(e,1),0===i.length&&(l(),l=null)}}}}const ae=()=>c(he).filter((e=>e.type!=de.EMPTY.id)).map((e=>{let t=[e.id];return e.id>=c(ye)&&c(he)[e.id-c(ye)].type==e.type&&t.push(e.id-c(ye)),e.id<c(he).length-c(ye)&&c(he)[e.id+c(ye)].type==e.type&&t.push(e.id+c(ye)),e.id%c(ye)!=0&&c(he)[e.id-1].type==e.type&&t.push(e.id-1),e.id%c(ye)!=c(ye)-1&&c(he)[e.id+1].type==e.type&&t.push(e.id+1),{type:e.type,cells:t}})).reduce(ue).reduce(ue),ue=(e,t)=>{Array.isArray(e)||(e=[e]);let n=!1;return e.forEach((e=>{e.type==t.type&&e.cells.some((e=>t.cells.includes(e)))&&(e.cells=e.cells.concat(t.cells).filter(((e,t,n)=>n.indexOf(e)==t)),n=!0)})),n?e:[...e,t]},de={EMPTY:{id:0,isEditable:!0},MOUNTAIN:{id:1,isEditable:!1},FOREST:{id:2,isEditable:!0},FIELD:{id:3,isEditable:!0},SEA:{id:4,isEditable:!0},VILLAGE:{id:5,isEditable:!0},MONSTER:{id:6,isEditable:!0},CREVASSE:{id:7,isEditable:!1}};function pe(e,t=de.EMPTY.id,n=!1){this.id=e,this.type=t,this.isRuins=n,this.hasNeighborOfType=function(e){return this.id>=c(ye)&&c(he)[this.id-c(ye)].type==e||this.id<c(he).length-c(ye)&&c(he)[this.id+c(ye)].type==e||this.id%c(ye)!=0&&c(he)[this.id-1].type==e||this.id%c(ye)!=c(ye)-1&&c(he)[this.id+1].type==e},this.getNeighborsOfType=function(e){let t=[];return this.id>=c(ye)&&c(he)[this.id-c(ye)].type==e&&t.push(this.id-c(ye)),this.id<c(he).length-c(ye)&&c(he)[this.id+c(ye)].type==e&&t.push(this.id+c(ye)),this.id%c(ye)!=0&&c(he)[this.id-1].type==e&&t.push(this.id-1),this.id%c(ye)!=c(ye)-1&&c(he)[this.id+1].type==e&&t.push(this.id+1),t},this.getNeighborsType=function(){let e=[];return this.id>=c(ye)&&c(he)[this.id-c(ye)].type!=de.EMPTY.id&&e.push(c(he)[this.id-c(ye)].type),this.id<c(he).length-c(ye)&&c(he)[this.id+c(ye)].type!=de.EMPTY.id&&e.push(c(he)[this.id+c(ye)].type),this.id%c(ye)!=0&&c(he)[this.id-1].type!=de.EMPTY.id&&e.push(c(he)[this.id-1].type),this.id%c(ye)!=c(ye)-1&&c(he)[this.id+1].type!=de.EMPTY.id&&e.push(c(he)[this.id+1].type),e},this.isAtEdge=function(){return this.id<c(ye)||this.id>=c(he).length-c(ye)||this.id%c(ye)==0||this.id%c(ye)==c(ye)-1},this.isSurrounded=function(){return(this.id<c(ye)||c(he)[this.id-c(ye)].type!=de.EMPTY.id)&&(this.id>=c(he).length-c(ye)||c(he)[e+c(ye)].type!=de.EMPTY.id)&&(this.id%c(ye)==0||c(he)[e-1].type!=de.EMPTY.id)&&(this.id%c(ye)==c(ye)-1||c(he)[e+1].type!=de.EMPTY.id)}}const fe=[{name:"Face A",init:()=>{let e=ge(121);return e[14].type=de.MOUNTAIN.id,e[30].type=de.MOUNTAIN.id,e[60].type=de.MOUNTAIN.id,e[90].type=de.MOUNTAIN.id,e[106].type=de.MOUNTAIN.id,e[16].isRuins=!0,e[23].isRuins=!0,e[23].isRuins=!0,e[31].isRuins=!0,e[89].isRuins=!0,e[97].isRuins=!0,e[104].isRuins=!0,e}},{name:"Face B",init:()=>{let e=ge(121);return e[19].type=de.MOUNTAIN.id,e[25].type=de.MOUNTAIN.id,e[82].type=de.MOUNTAIN.id,e[97].type=de.MOUNTAIN.id,e[101].type=de.MOUNTAIN.id,e[38].type=de.CREVASSE.id,e[48].type=de.CREVASSE.id,e[49].type=de.CREVASSE.id,e[59].type=de.CREVASSE.id,e[60].type=de.CREVASSE.id,e[61].type=de.CREVASSE.id,e[71].type=de.CREVASSE.id,e[17].isRuins=!0,e[24].isRuins=!0,e[67].isRuins=!0,e[85].isRuins=!0,e[102].isRuins=!0,e}}],ge=(e=121)=>Array.from({length:e},((e,t)=>new pe(t))),me=ce(fe[0]),he=ce([]),$e=ce(0),ye=ce(11),ve=ce(""),be=ce([{},{},{},{}]);function Ee(t){let n,l,i,r;return{c(){n=b("button"),l=b("div"),A(l,"class","cell svelte-ogop37"),N(l,"cell-mountain",t[0].type==de.MOUNTAIN.id),N(l,"cell-forest",t[0].type==de.FOREST.id),N(l,"cell-field",t[0].type==de.FIELD.id),N(l,"cell-sea",t[0].type==de.SEA.id),N(l,"cell-village",t[0].type==de.VILLAGE.id),N(l,"cell-monster",t[0].type==de.MONSTER.id),N(l,"cell-crevasse",t[0].type==de.CREVASSE.id),N(l,"cell-ruins",t[0].isRuins),N(l,"cell-top",t[2]),N(l,"cell-bottom",t[4]),N(l,"cell-left",t[3]),N(l,"cell-right",t[5]),A(n,"class","cell-container svelte-ogop37"),S(n,"flex-basis",100/t[1]+"%")},m(e,o){$(e,n,o),h(n,l),i||(r=L(n,"click",(function(){s(t[6])&&t[6].apply(this,arguments)})),i=!0)},p(e,[i]){t=e,1&i&&N(l,"cell-mountain",t[0].type==de.MOUNTAIN.id),1&i&&N(l,"cell-forest",t[0].type==de.FOREST.id),1&i&&N(l,"cell-field",t[0].type==de.FIELD.id),1&i&&N(l,"cell-sea",t[0].type==de.SEA.id),1&i&&N(l,"cell-village",t[0].type==de.VILLAGE.id),1&i&&N(l,"cell-monster",t[0].type==de.MONSTER.id),1&i&&N(l,"cell-crevasse",t[0].type==de.CREVASSE.id),1&i&&N(l,"cell-ruins",t[0].isRuins),4&i&&N(l,"cell-top",t[2]),16&i&&N(l,"cell-bottom",t[4]),8&i&&N(l,"cell-left",t[3]),32&i&&N(l,"cell-right",t[5]),2&i&&S(n,"flex-basis",100/t[1]+"%")},i:e,o:e,d(e){e&&y(n),i=!1,r()}}}function xe(e,t,n){let l;a(e,ye,(e=>n(7,l=e)));let{data:i={}}=t,{cellsPerLine:s=l}=t,{isFisrtLine:r=!1}=t,{isFisrtCol:o=!1}=t,{isLastLine:c=!1}=t,{isLastCol:u=!1}=t,{click:d}=t;return e.$$set=e=>{"data"in e&&n(0,i=e.data),"cellsPerLine"in e&&n(1,s=e.cellsPerLine),"isFisrtLine"in e&&n(2,r=e.isFisrtLine),"isFisrtCol"in e&&n(3,o=e.isFisrtCol),"isLastLine"in e&&n(4,c=e.isLastLine),"isLastCol"in e&&n(5,u=e.isLastCol),"click"in e&&n(6,d=e.click)},[i,s,r,o,c,u,d]}me.subscribe((e=>{he.set(e.init())}));class Fe extends re{constructor(e){super(),se(this,e,xe,Ee,r,{data:0,cellsPerLine:1,isFisrtLine:2,isFisrtCol:3,isLastLine:4,isLastCol:5,click:6})}}const Le=ce(!1),Ae=ce(null);function _e(e,t,n){const l=e.slice();return l[4]=t[n],l}function Me(e){let t,n,l;function i(){return e[2](e[4])}return{c(){t=b("button"),A(t,"class","coin svelte-2867ad"),N(t,"coin-earn",e[4]<e[0])},m(e,s){$(e,t,s),n||(l=L(t,"click",i),n=!0)},p(n,l){e=n,1&l&&N(t,"coin-earn",e[4]<e[0])},d(e){e&&y(t),n=!1,l()}}}function Ce(t){let n,l=Array.from({length:14},Se),i=[];for(let e=0;e<l.length;e+=1)i[e]=Me(_e(t,l,e));return{c(){n=b("div");for(let e=0;e<i.length;e+=1)i[e].c();A(n,"class","coins svelte-2867ad")},m(e,t){$(e,n,t);for(let e=0;e<i.length;e+=1)i[e].m(n,null)},p(e,[t]){if(3&t){let s;for(l=Array.from({length:14},Se),s=0;s<l.length;s+=1){const r=_e(e,l,s);i[s]?i[s].p(r,t):(i[s]=Me(r),i[s].c(),i[s].m(n,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=l.length}},i:e,o:e,d(e){e&&y(n),v(i,e)}}}const Se=(e,t)=>t;function Te(e,t,n){let l;a(e,$e,(e=>n(0,l=e)));const i=e=>{m($e,l=e,l)};return[l,i,e=>{i(e+1==l?e:e+1)}]}class Oe extends re{constructor(e){super(),se(this,e,Te,Ce,r,{})}}const Ne=ce(localStorage.username);function we(e,t,n){const l=e.slice();return l[5]=t[n],l}function Re(e){let t,n,l,i,s,r,o,c,a,u,d,p,f,g,m,v,F,L=e[5].score.r1+"",_=e[5].score.r2+"",C=e[5].score.coins+"",S=e[5].score.monsters+"",T=e[5].score.total+"";return{c(){t=b("div"),n=b("div"),l=E(L),i=x(),s=b("div"),r=E(_),o=x(),c=b("div"),a=E(C),u=x(),d=b("div"),p=E("-"),f=E(S),g=x(),m=b("div"),v=E(T),F=x(),A(n,"class","cell rule svelte-1blbfbg"),A(s,"class","cell rule svelte-1blbfbg"),A(c,"class","cell coins svelte-1blbfbg"),A(d,"class","cell monsters svelte-1blbfbg"),A(m,"class","cell sstotal svelte-1blbfbg"),A(t,"class","score svelte-1blbfbg")},m(e,y){$(e,t,y),h(t,n),h(n,l),h(t,i),h(t,s),h(s,r),h(t,o),h(t,c),h(c,a),h(t,u),h(t,d),h(d,p),h(d,f),h(t,g),h(t,m),h(m,v),h(t,F)},p(e,t){2&t&&L!==(L=e[5].score.r1+"")&&M(l,L),2&t&&_!==(_=e[5].score.r2+"")&&M(r,_),2&t&&C!==(C=e[5].score.coins+"")&&M(a,C),2&t&&S!==(S=e[5].score.monsters+"")&&M(f,S),2&t&&T!==(T=e[5].score.total+"")&&M(v,T)},d(e){e&&y(t)}}}function qe(e){let t,n,l=e[1].reduce(Pe,0)+"";return{c(){t=b("div"),n=E(l),A(t,"class","total svelte-1blbfbg")},m(e,l){$(e,t,l),h(t,n)},p(e,t){2&t&&l!==(l=e[1].reduce(Pe,0)+"")&&M(n,l)},d(e){e&&y(t)}}}function Ie(t){let n,l,i;return{c(){n=b("button"),n.textContent="Next season",A(n,"class","next-season svelte-1blbfbg")},m(e,s){$(e,n,s),l||(i=L(n,"click",t[2]),l=!0)},p:e,d(e){e&&y(n),l=!1,i()}}}function ke(t){let n,l,i,s=t[1],r=[];for(let e=0;e<s.length;e+=1)r[e]=Re(we(t,s,e));function o(e,t){return e[0]<e[1].length?Ie:qe}let c=o(t),a=c(t);return{c(){n=b("div"),l=b("div");for(let e=0;e<r.length;e+=1)r[e].c();i=x(),a.c(),A(l,"class","scores svelte-1blbfbg")},m(e,t){$(e,n,t),h(n,l);for(let e=0;e<r.length;e+=1)r[e].m(l,null);h(n,i),a.m(n,null)},p(e,[t]){if(2&t){let n;for(s=e[1],n=0;n<s.length;n+=1){const i=we(e,s,n);r[n]?r[n].p(i,t):(r[n]=Re(i),r[n].c(),r[n].m(l,null))}for(;n<r.length;n+=1)r[n].d(1);r.length=s.length}c===(c=o(e))&&a?a.p(e,t):(a.d(1),a=c(e),a&&(a.c(),a.m(n,null)))},i:e,o:e,d(e){e&&y(n),v(r,e),a.d()}}}Ne.subscribe((e=>{e&&(localStorage.username=e)}));const Pe=(e,t)=>e+t.score.total;function De(e,t,n){let l,i;a(e,be,(e=>n(3,l=e))),a(e,he,(e=>n(4,i=e)));let s=0,r=[{name:"Printemps",r1:l[0].calc,r2:l[1].calc,ended:!1,score:{r1:0,r2:0,coins:0,monsters:0,total:0}},{name:"Été",r1:l[1].calc,r2:l[2].calc,ended:!1,score:{r1:0,r2:0,coins:0,monsters:0,total:0}},{name:"Automne",r1:l[2].calc,r2:l[3].calc,ended:!1,score:{r1:0,r2:0,coins:0,monsters:0,total:0}},{name:"Hiver",r1:l[3].calc,r2:l[0].calc,ended:!1,score:{r1:0,r2:0,coins:0,monsters:0,total:0}}];return[s,r,()=>{let e=r[s].r1(c(he),c(ye)),t=r[s].r2(c(he),c(ye)),l=c($e),o=i.filter((e=>e.type==de.MONSTER.id)).map((e=>e.getNeighborsOfType(de.EMPTY.id))).reduce(((e,t)=>e.concat(t)),[]).filter(((e,t,n)=>n.indexOf(e)==t)).length;n(1,r[s].score={r1:e,r2:t,coins:l,monsters:o,total:e+t+l-o},r),n(0,s++,s)}]}class Ve extends re{constructor(e){super(),se(this,e,De,ke,r,{})}}function Ge(e,t,n){const l=e.slice();return l[8]=t[n],l[10]=n,l}function ze(e){let t,n;function l(){return e[5](e[8])}return t=new Fe({props:{click:l,data:e[8],isFisrtCol:e[10]%e[3]==0,isFisrtLine:e[10]<e[3],isLastCol:e[10]%e[3]==e[3]-1,isLastLine:e[10]>=e[2].length-e[3]}}),{c(){ne(t.$$.fragment)},m(e,l){le(t,e,l),n=!0},p(n,i){e=n;const s={};4&i&&(s.click=l),4&i&&(s.data=e[8]),8&i&&(s.isFisrtCol=e[10]%e[3]==0),8&i&&(s.isFisrtLine=e[10]<e[3]),8&i&&(s.isLastCol=e[10]%e[3]==e[3]-1),12&i&&(s.isLastLine=e[10]>=e[2].length-e[3]),t.$set(s)},i(e){n||(Z(t.$$.fragment,e),n=!0)},o(e){ee(t.$$.fragment,e),n=!1},d(e){ie(t,e)}}}function je(e){let t,n,l,i,s,r,o,c,a,u,d,p,f,g,m,F,L,_,C,S,T,O=e[2],N=[];for(let t=0;t<O.length;t+=1)N[t]=ze(Ge(e,O,t));const w=e=>ee(N[e],1,1,(()=>{N[e]=null}));return _=new Oe({}),S=new Ve({}),{c(){t=b("div"),n=b("div"),l=b("div"),i=b("p"),i.textContent="Cartographer :",s=x(),r=b("h1"),o=E(e[0]),c=x(),a=b("p"),a.textContent="Title :",u=x(),d=b("h1"),p=E(e[1]),f=x(),g=b("div"),m=x(),F=b("div");for(let e=0;e<N.length;e+=1)N[e].c();L=x(),ne(_.$$.fragment),C=x(),ne(S.$$.fragment),A(i,"class","label svelte-1dcnm6k"),A(r,"class","name svelte-1dcnm6k"),A(a,"class","label svelte-1dcnm6k"),A(d,"class","title svelte-1dcnm6k"),A(l,"class","cartographer-infos"),A(g,"class","compass svelte-1dcnm6k"),A(n,"class","header svelte-1dcnm6k"),A(F,"class","board svelte-1dcnm6k"),A(t,"class","app svelte-1dcnm6k")},m(e,y){$(e,t,y),h(t,n),h(n,l),h(l,i),h(l,s),h(l,r),h(r,o),h(l,c),h(l,a),h(l,u),h(l,d),h(d,p),h(n,f),h(n,g),h(t,m),h(t,F);for(let e=0;e<N.length;e+=1)N[e].m(F,null);h(t,L),le(_,t,null),h(t,C),le(S,t,null),T=!0},p(e,[t]){if((!T||1&t)&&M(o,e[0]),(!T||2&t)&&M(p,e[1]),28&t){let n;for(O=e[2],n=0;n<O.length;n+=1){const l=Ge(e,O,n);N[n]?(N[n].p(l,t),Z(N[n],1)):(N[n]=ze(l),N[n].c(),Z(N[n],1),N[n].m(F,null))}for(Q(),n=O.length;n<N.length;n+=1)w(n);X()}},i(e){if(!T){for(let e=0;e<O.length;e+=1)Z(N[e]);Z(_.$$.fragment,e),Z(S.$$.fragment,e),T=!0}},o(e){N=N.filter(Boolean);for(let e=0;e<N.length;e+=1)ee(N[e]);ee(_.$$.fragment,e),ee(S.$$.fragment,e),T=!1},d(e){e&&y(t),v(N,e),ie(_),ie(S)}}}function Ue(e,t,n){let l,i,s,r,o,c;a(e,Le,(e=>n(6,l=e))),a(e,Ae,(e=>n(7,i=e))),a(e,Ne,(e=>n(0,s=e))),a(e,ve,(e=>n(1,r=e))),a(e,he,(e=>n(2,o=e))),a(e,ye,(e=>n(3,c=e)));const u=e=>{Object.values(de).filter((t=>t.id==e.type&&t.isEditable)).length>0&&m(Le,l=!0,l),m(Ae,i=e.id,i)};I((()=>{window.addEventListener("beforeunload",(e=>{e.preventDefault(),e.returnValue=""}))}));return[s,r,o,c,u,e=>u(e)]}class Ye extends re{constructor(e){super(),se(this,e,Ue,je,r,{})}}function Be(e){let t,n;const l=e[2].default,i=u(l,e,e[1],null);return{c(){t=b("div"),i&&i.c()},m(l,s){$(l,t,s),i&&i.m(t,null),e[3](t),n=!0},p(e,[t]){i&&i.p&&(!n||2&t)&&p(i,l,e,e[1],t,null,null)},i(e){n||(Z(i,e),n=!0)},o(e){ee(i,e),n=!1},d(n){n&&y(t),i&&i.d(n),e[3](null)}}}function He(e,t,n){let l,i,{$$slots:s={},$$scope:r}=t;return I((()=>(i=document.createElement("div"),i.setAttribute("data-svelte-dialog-portal","true"),document.body.appendChild(i),i.appendChild(l),()=>{document.body.removeChild(i)}))),e.$$set=e=>{"$$scope"in e&&n(1,r=e.$$scope)},[l,r,s,function(e){P[e?"unshift":"push"]((()=>{l=e,n(0,l)}))}]}class We extends re{constructor(e){super(),se(this,e,He,Be,r,{})}}function Ke(e){let t;const n=e[2].default,l=u(n,e,e[1],null);return{c(){l&&l.c()},m(e,n){l&&l.m(e,n),t=!0},p(e,[i]){l&&l.p&&(!t||2&i)&&p(l,n,e,e[1],i,null,null)},i(e){t||(Z(l,e),t=!0)},o(e){ee(l,e),t=!1},d(e){l&&l.d(e)}}}function Je(e,t,n){let{$$slots:l={},$$scope:i}=t,{enabled:s}=t,r=[];const o=e=>{r.push({ariaHidden:e.getAttribute("aria-hidden"),inert:e.getAttribute("inert")}),e.setAttribute("aria-hidden","true"),e.setAttribute("inert","true")},c=(e,t)=>{const{ariaHidden:n,inert:l}=r[t];n?e.setAttribute("aria-hidden",n):e.removeAttribute("aria-hidden"),l||e.removeAttribute("inert")};return I((()=>{if(!s)return;const e=document.querySelectorAll("body > *:not([data-svelte-dialog-portal])");return e.forEach(o),()=>{e.forEach(c)}})),e.$$set=e=>{"enabled"in e&&n(0,s=e.enabled),"$$scope"in e&&n(1,i=e.$$scope)},[s,i,l]}class Qe extends re{constructor(e){super(),se(this,e,Je,Ke,r,{enabled:0})}}function Xe(e){let t,n,l,i;const s=e[5].default,r=u(s,e,e[4],null);return{c(){t=b("div"),r&&r.c()},m(s,o){$(s,t,o),r&&r.m(t,null),e[6](t),n=!0,l||(i=L(window,"keydown",e[1]),l=!0)},p(e,[t]){r&&r.p&&(!n||16&t)&&p(r,s,e,e[4],t,null,null)},i(e){n||(Z(r,e),n=!0)},o(e){ee(r,e),n=!1},d(n){n&&y(t),r&&r.d(n),e[6](null),l=!1,i()}}}function Ze(e,t,n){let l,i,s,r,o,{$$slots:c={},$$scope:a}=t,{initialFocusElement:u}=t,{returnFocusElement:d}=t;var p;I((()=>{o=d||document.activeElement,i=[...l.querySelectorAll("*")].filter((e=>e.tabIndex>=0)),s=i[0],r=i[i.length-1],(j(),G).then((()=>{if(u)u.focus();else{(l.querySelector("[autofocus]")||s||l.querySelector("[data-svelte-dialog-content]")).focus()}}))})),p=()=>{o&&o.focus()},q().$$.on_destroy.push(p);return e.$$set=e=>{"initialFocusElement"in e&&n(2,u=e.initialFocusElement),"returnFocusElement"in e&&n(3,d=e.returnFocusElement),"$$scope"in e&&n(4,a=e.$$scope)},[l,e=>{"Tab"===e.key&&(0===i.length&&e.preventDefault(),e.shiftKey?document.activeElement===s&&(e.preventDefault(),r.focus()):document.activeElement===r&&(e.preventDefault(),s.focus()))},u,d,a,c,function(e){P[e?"unshift":"push"]((()=>{l=e,n(0,l)}))}]}class et extends re{constructor(e){super(),se(this,e,Ze,Xe,r,{initialFocusElement:2,returnFocusElement:3})}}function tt(e){let t;const n=e[1].default,l=u(n,e,e[0],null);return{c(){l&&l.c()},m(e,n){l&&l.m(e,n),t=!0},p(e,[i]){l&&l.p&&(!t||1&i)&&p(l,n,e,e[0],i,null,null)},i(e){t||(Z(l,e),t=!0)},o(e){ee(l,e),t=!1},d(e){l&&l.d(e)}}}function nt(e,t,n){let{$$slots:l={},$$scope:i}=t;return I((()=>{const{body:e,documentElement:t}=document,n=window.innerWidth-t.clientWidth,l=parseInt(window.getComputedStyle(e).getPropertyValue("padding-right"))||0;return t.style.position="relative",t.style.overflow="hidden",e.style.position="relative",e.style.overflow="hidden",e.style.paddingRight=`${l+n}px`,()=>{t.style.position="",t.style.overflow="",e.style.position="",e.style.overflow="",e.style.paddingRight=""}})),e.$$set=e=>{"$$scope"in e&&n(0,i=e.$$scope)},[i,l]}class lt extends re{constructor(e){super(),se(this,e,nt,tt,r,{})}}function it(e){let n,l,i,s;const r=e[7].default,o=u(r,e,e[8],null);let c=[e[5],{"data-svelte-dialog-overlay":""}],a={};for(let e=0;e<c.length;e+=1)a=t(a,c[e]);return{c(){n=b("div"),o&&o.c(),_(n,a),N(n,"svelte-64d8vk",!0)},m(t,r){var c;$(t,n,r),o&&o.m(n,null),l=!0,i||(s=L(n,"click",function(e){return function(t){t.target===this&&e.call(this,t)}}((c=e[3],function(e){return e.stopPropagation(),c.call(this,e)}))),i=!0)},p(e,t){o&&o.p&&(!l||256&t)&&p(o,r,e,e[8],t,null,null),_(n,a=te(c,[32&t&&e[5],{"data-svelte-dialog-overlay":""}])),N(n,"svelte-64d8vk",!0)},i(e){l||(Z(o,e),l=!0)},o(e){ee(o,e),l=!1},d(e){e&&y(n),o&&o.d(e),i=!1,s()}}}function st(e){let t,n;return t=new lt({props:{$$slots:{default:[it]},$$scope:{ctx:e}}}),{c(){ne(t.$$.fragment)},m(e,l){le(t,e,l),n=!0},p(e,n){const l={};288&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(Z(t.$$.fragment,e),n=!0)},o(e){ee(t.$$.fragment,e),n=!1},d(e){ie(t,e)}}}function rt(e){let t,n;return t=new et({props:{initialFocusElement:e[0],returnFocusElement:e[1],$$slots:{default:[st]},$$scope:{ctx:e}}}),{c(){ne(t.$$.fragment)},m(e,l){le(t,e,l),n=!0},p(e,n){const l={};1&n&&(l.initialFocusElement=e[0]),2&n&&(l.returnFocusElement=e[1]),288&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(Z(t.$$.fragment,e),n=!0)},o(e){ee(t.$$.fragment,e),n=!1},d(e){ie(t,e)}}}function ot(e){let t,n,l,i;return t=new Qe({props:{enabled:e[2],$$slots:{default:[rt]},$$scope:{ctx:e}}}),{c(){ne(t.$$.fragment)},m(s,r){le(t,s,r),n=!0,l||(i=L(window,"keydown",e[4]),l=!0)},p(e,[n]){const l={};4&n&&(l.enabled=e[2]),291&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(Z(t.$$.fragment,e),n=!0)},o(e){ee(t.$$.fragment,e),n=!1},d(e){ie(t,e),l=!1,i()}}}function ct(e,n,l){const i=["onDismiss","initialFocusElement","returnFocusElement","ariaModalLegacy"];let s=g(n,i),{$$slots:r={},$$scope:o}=n,{onDismiss:c}=n,{initialFocusElement:a}=n,{returnFocusElement:u}=n,{ariaModalLegacy:d}=n;return e.$$set=e=>{n=t(t({},n),f(e)),l(5,s=g(n,i)),"onDismiss"in e&&l(6,c=e.onDismiss),"initialFocusElement"in e&&l(0,a=e.initialFocusElement),"returnFocusElement"in e&&l(1,u=e.returnFocusElement),"ariaModalLegacy"in e&&l(2,d=e.ariaModalLegacy),"$$scope"in e&&l(8,o=e.$$scope)},[a,u,d,()=>{c()},e=>{"Escape"===e.key&&c()},s,c,r,o]}class at extends re{constructor(e){super(),se(this,e,ct,ot,r,{onDismiss:6,initialFocusElement:0,returnFocusElement:1,ariaModalLegacy:2})}}function ut(e){let t,n;return t=new We({props:{$$slots:{default:[pt]},$$scope:{ctx:e}}}),{c(){ne(t.$$.fragment)},m(e,l){le(t,e,l),n=!0},p(e,n){const l={};190&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(Z(t.$$.fragment,e),n=!0)},o(e){ee(t.$$.fragment,e),n=!1},d(e){ie(t,e)}}}function dt(e){let t;const n=e[6].default,l=u(n,e,e[7],null);return{c(){l&&l.c()},m(e,n){l&&l.m(e,n),t=!0},p(e,i){l&&l.p&&(!t||128&i)&&p(l,n,e,e[7],i,null,null)},i(e){t||(Z(l,e),t=!0)},o(e){ee(l,e),t=!1},d(e){l&&l.d(e)}}}function pt(e){let n,l;const i=[e[5],{onDismiss:e[1]},{initialFocusElement:e[2]},{returnFocusElement:e[3]},{ariaModalLegacy:e[4]}];let s={$$slots:{default:[dt]},$$scope:{ctx:e}};for(let e=0;e<i.length;e+=1)s=t(s,i[e]);return n=new at({props:s}),{c(){ne(n.$$.fragment)},m(e,t){le(n,e,t),l=!0},p(e,t){const l=62&t?te(i,[32&t&&(s=e[5],"object"==typeof s&&null!==s?s:{}),2&t&&{onDismiss:e[1]},4&t&&{initialFocusElement:e[2]},8&t&&{returnFocusElement:e[3]},16&t&&{ariaModalLegacy:e[4]}]):{};var s;128&t&&(l.$$scope={dirty:t,ctx:e}),n.$set(l)},i(e){l||(Z(n.$$.fragment,e),l=!0)},o(e){ee(n.$$.fragment,e),l=!1},d(e){ie(n,e)}}}function ft(e){let t,n,l=e[0]&&ut(e);return{c(){l&&l.c(),t=F()},m(e,i){l&&l.m(e,i),$(e,t,i),n=!0},p(e,[n]){e[0]?l?(l.p(e,n),1&n&&Z(l,1)):(l=ut(e),l.c(),Z(l,1),l.m(t.parentNode,t)):l&&(Q(),ee(l,1,1,(()=>{l=null})),X())},i(e){n||(Z(l),n=!0)},o(e){ee(l),n=!1},d(e){l&&l.d(e),e&&y(t)}}}function gt(e,n,l){const i=["isOpen","onDismiss","initialFocusElement","returnFocusElement","ariaModalLegacy"];let s=g(n,i),{$$slots:r={},$$scope:o}=n,{isOpen:c}=n,{onDismiss:a}=n,{initialFocusElement:u=null}=n,{returnFocusElement:d=null}=n,{ariaModalLegacy:p=!1}=n;return e.$$set=e=>{n=t(t({},n),f(e)),l(5,s=g(n,i)),"isOpen"in e&&l(0,c=e.isOpen),"onDismiss"in e&&l(1,a=e.onDismiss),"initialFocusElement"in e&&l(2,u=e.initialFocusElement),"returnFocusElement"in e&&l(3,d=e.returnFocusElement),"ariaModalLegacy"in e&&l(4,p=e.ariaModalLegacy),"$$scope"in e&&l(7,o=e.$$scope)},[c,a,u,d,p,s,r,o]}class mt extends re{constructor(e){super(),se(this,e,gt,ft,r,{isOpen:0,onDismiss:1,initialFocusElement:2,returnFocusElement:3,ariaModalLegacy:4})}}function ht(e){let n,l;const i=e[2].default,s=u(i,e,e[1],null);let r=[e[0],{"data-svelte-dialog-content":""},{"aria-modal":"true"},{role:"dialog"},{tabindex:"-1"}],o={};for(let e=0;e<r.length;e+=1)o=t(o,r[e]);return{c(){n=b("div"),s&&s.c(),_(n,o),N(n,"svelte-1472bc8",!0)},m(e,t){$(e,n,t),s&&s.m(n,null),l=!0},p(e,[t]){s&&s.p&&(!l||2&t)&&p(s,i,e,e[1],t,null,null),_(n,o=te(r,[1&t&&e[0],{"data-svelte-dialog-content":""},{"aria-modal":"true"},{role:"dialog"},{tabindex:"-1"}])),N(n,"svelte-1472bc8",!0)},i(e){l||(Z(s,e),l=!0)},o(e){ee(s,e),l=!1},d(e){e&&y(n),s&&s.d(e)}}}function $t(e,n,l){const i=[];let s=g(n,i),{$$slots:r={},$$scope:o}=n;return e.$$set=e=>{n=t(t({},n),f(e)),l(0,s=g(n,i)),"$$scope"in e&&l(1,o=e.$$scope)},[s,o,r]}class yt extends re{constructor(e){super(),se(this,e,$t,ht,r,{})}}function vt(e,t,n){const l=e.slice();return l[8]=t[n],l}function bt(e){let t,n;return t=new Fe({props:{data:new pe(0,e[8].id),cellsPerLine:e[1].length/2,click:function(){return e[4](e[8])}}}),{c(){ne(t.$$.fragment)},m(e,l){le(t,e,l),n=!0},p(t,n){e=t},i(e){n||(Z(t.$$.fragment,e),n=!0)},o(e){ee(t.$$.fragment,e),n=!1},d(e){ie(t,e)}}}function Et(e){let t,n,l,i,s,r,o,c,a,u,d=e[1],p=[];for(let t=0;t<d.length;t+=1)p[t]=bt(vt(e,d,t));const f=e=>ee(p[e],1,1,(()=>{p[e]=null}));return{c(){t=b("button"),t.innerHTML='<svg width="100%" height="100%" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g data-name="Layer 2"><g data-name="close"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"></rect><path fill="currentColor" d="M13.41 12l4.3-4.29a1 1 0 1 0-1.42-1.42L12 10.59l-4.29-4.3a1 1 0 0 0-1.42 1.42l4.3 4.29-4.3 4.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l4.29-4.3 4.29 4.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"></path></g></g></svg>',n=x(),l=b("h1"),l.textContent="Select type",i=x(),s=b("p"),s.textContent="Select the type the cell should be applied :",r=x(),o=b("div");for(let e=0;e<p.length;e+=1)p[e].c();A(t,"class","close svelte-1fq2idn"),A(t,"aria-label","close"),A(l,"class","svelte-1fq2idn"),A(o,"class","cells svelte-1fq2idn")},m(d,f){$(d,t,f),$(d,n,f),$(d,l,f),$(d,i,f),$(d,s,f),$(d,r,f),$(d,o,f);for(let e=0;e<p.length;e+=1)p[e].m(o,null);c=!0,a||(u=L(t,"click",e[2]),a=!0)},p(e,t){if(10&t){let n;for(d=e[1],n=0;n<d.length;n+=1){const l=vt(e,d,n);p[n]?(p[n].p(l,t),Z(p[n],1)):(p[n]=bt(l),p[n].c(),Z(p[n],1),p[n].m(o,null))}for(Q(),n=d.length;n<p.length;n+=1)f(n);X()}},i(e){if(!c){for(let e=0;e<d.length;e+=1)Z(p[e]);c=!0}},o(e){p=p.filter(Boolean);for(let e=0;e<p.length;e+=1)ee(p[e]);c=!1},d(e){e&&y(t),e&&y(n),e&&y(l),e&&y(i),e&&y(s),e&&y(r),e&&y(o),v(p,e),a=!1,u()}}}function xt(e){let t,n;return t=new yt({props:{"aria-label":"Announcement",class:"content",$$slots:{default:[Et]},$$scope:{ctx:e}}}),{c(){ne(t.$$.fragment)},m(e,l){le(t,e,l),n=!0},p(e,n){const l={};2048&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(Z(t.$$.fragment,e),n=!0)},o(e){ee(t.$$.fragment,e),n=!1},d(e){ie(t,e)}}}function Ft(e){let t,n;return t=new mt({props:{isOpen:e[0],onDismiss:e[2],class:"overlay",$$slots:{default:[xt]},$$scope:{ctx:e}}}),{c(){ne(t.$$.fragment)},m(e,l){le(t,e,l),n=!0},p(e,[n]){const l={};1&n&&(l.isOpen=e[0]),2048&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(Z(t.$$.fragment,e),n=!0)},o(e){ee(t.$$.fragment,e),n=!1},d(e){ie(t,e)}}}function Lt(e,t,n){let l,i,s;a(e,Le,(e=>n(0,l=e))),a(e,he,(e=>n(5,i=e))),a(e,Ae,(e=>n(6,s=e)));let r=Object.values(de).filter((e=>e.isEditable));const o=()=>{m(Le,l=!1,l)},c=e=>{m(he,i=i.map((t=>t.id==s?{...t,type:e}:t)),i),o()};return[l,r,o,c,e=>c(e.id)]}class At extends re{constructor(e){super(),se(this,e,Lt,Ft,r,{})}}function _t(t){let n,l,s,r,o,c,a,u,d,p,f,g;return{c(){n=b("div"),l=b("form"),s=b("img"),o=x(),c=b("label"),c.textContent="Cartographer",a=x(),u=b("input"),d=x(),p=b("button"),p.textContent="Confirm",s.src!==(r="assets/img/compass.svg")&&A(s,"src","assets/img/compass.svg"),A(s,"alt",""),A(s,"class","logo svelte-1rr8iy2"),A(c,"for","username"),A(c,"class","label svelte-1rr8iy2"),A(u,"type","text"),A(u,"id","username"),A(u,"name","username"),A(u,"class","input"),A(p,"class","confirm"),A(l,"class","login svelte-1rr8iy2"),A(n,"class","login-container svelte-1rr8iy2")},m(e,i){$(e,n,i),h(n,l),h(l,s),h(l,o),h(l,c),h(l,a),h(l,u),C(u,t[0]),h(l,d),h(l,p),f||(g=[L(u,"input",t[2]),L(l,"submit",t[1])],f=!0)},p(e,[t]){1&t&&u.value!==e[0]&&C(u,e[0])},i:e,o:e,d(e){e&&y(n),f=!1,i(g)}}}function Mt(e,t,n){let l;a(e,Ne,(e=>n(3,l=e)));let i=l;return[i,e=>{e.preventDefault(),m(Ne,l=i,l)},function(){i=this.value,n(0,i)}]}class Ct extends re{constructor(e){super(),se(this,e,Mt,_t,r,{})}}const St=[{id:26,type:"Forêt",name:"Bois de la Sentinelle",desc:"Gagnez une étoile de réputation pour chaque case Forêt adjacente au bord du parchemin.",calc:(e,t)=>e.filter((n=>n.type==de.FOREST.id&&(n.id%t==0||n.id<t||n.id%t==t-1||n.id>=e.length-t))).length},{id:27,type:"Forêt",name:"Chemin Verdoyant",desc:"Gagnez une étoile de réputation pour chaque ligne ou colonne ayant au moins une case Forêt. La même case Forêt peut être décomptée à la fois pour une ligne et pour une colonne.",calc:(e,t)=>e.filter((e=>e.type==de.FOREST.id)).map((e=>[e.id%t+1,-Math.trunc(e.id/t)-1])).flat(1).filter(((e,t,n)=>n.indexOf(e)==t)).length},{id:28,type:"Forêt",name:"Arbres-Vigies",desc:"Gagnez une étoile de réputation pour chaque case Forêt entourée sur ses quatres côtés par une case remplies ou par le bord du parchemin.",calc:(e,t)=>e.filter((e=>e.type==de.FOREST.id&&e.isSurrounded())).length},{id:29,type:"Forêt",name:"Forêt des Hauts Plateaux",desc:"Gagnez trois étoiles de réputation pour chaque case Montagne connectées à une autre case Montagne par une région de Forêts.",calc:(e,t)=>3*ae().filter((e=>e.type==de.FOREST.id)).map((t=>t.cells.reduce(((t,n)=>t.concat(e[n].getNeighborsOfType(de.MOUNTAIN.id))),[]).filter(((e,t,n)=>n.indexOf(e)==t)))).filter((e=>e.length>=2)).reduce(((e,t)=>e.concat(t)),[]).filter(((e,t,n)=>n.indexOf(e)==t)).length},{id:30,type:"Ferme/Lac",name:"Cannaux d'Irrigation",desc:"Gagnez une étoile de réputation pour chaque case Lac adjacente à au moins une Ferme. Gagnez une étoile de réputation pour chaque case Ferme adjacente à au moins une case Lac.",calc:(e,t)=>e.filter((e=>e.type==de.SEA.id&&e.hasNeighborOfType(de.FIELD.id))).length+e.filter((e=>e.type==de.FIELD.id&&e.hasNeighborOfType(de.SEA.id))).length},{id:31,type:"Ferme/Lac",name:"Vallée des Mages",desc:"Gagnez une étoile de réputation pour chaque case Lac adjacente à une case Montagne. Gagnez une étoile de réputation pour chaque case Ferme adjacente à une case à une case Montagne.",calc:(e,t)=>2*e.filter((e=>e.type==de.SEA.id&&e.hasNeighborOfType(de.MOUNTAIN.id))).length+e.filter((e=>e.type==de.FIELD.id&&e.hasNeighborOfType(de.MOUNTAIN.id))).length},{id:32,type:"Ferme/Lac",name:"Grenier Doré",desc:"Gagnez une étoile de réputation pour chaque case Lac adjacente à une case Ruines. Gagnez trois étoiles de réputation pour chaque case Ferme sur une case Ruines.",calc:(e,t)=>e.filter((n=>n.type==de.SEA.id&&(!(n.id<t)&&e[n.id-t].isRuins||!(n.id>e.length-t)&&e[n.id+t].isRuins||n.id%t!=0&&e[n.id-1].isRuins||n.id%t!=t-1&&e[n.id+1].isRuins))).length+3*e.filter((t=>t.type==de.FIELD.id&&e[t.id].isRuins)).length},{id:33,type:"Ferme/Lac",name:"Montée des Eaux",desc:"Gagnez trois étoiles de réputation pour chaque région de Ferme qui n'est adjacente ni à une case Lac ni au bord du parchemin. Gagnez trois étoiles de réputation pour chaque région de Lacs qui n'est adjacente ni à une case Ferme ni au bord du parchemin.",calc:(e,t)=>3*ae().filter((t=>t.type==de.FIELD.id&&0==t.cells.filter((t=>e[t].hasNeighborOfType(de.SEA.id)||e[t].isAtEdge())).length)).length+3*ae().filter((t=>t.type==de.SEA.id&&0==t.cells.filter((t=>e[t].hasNeighborOfType(de.FIELD.id)||e[t].isAtEdge())).length)).length},{id:34,type:"Village",name:"Places Fortes",desc:"Gagnez huit étoiles de réputationpour chaque région de six Villages ou plus.",calc:(e,t)=>8*ae().filter((e=>e.type==de.VILLAGE.id&&e.cells.length>=6)).length},{id:35,type:"Village",name:"Grande Cité",desc:"Gagnez une étoile de réputation pour chaque case Village dans la plus grande région de Village qui n'est pas adjacente à une case montagne.",calc:(e,t)=>ae().filter((t=>t.type==de.VILLAGE.id&&0==t.cells.filter((t=>e[t].hasNeighborOfType(de.MOUNTAIN.id))).length)).reduce(((e,t)=>e>t.cells.length?e:t.cells.length),0)},{id:36,type:"Village",name:"Plaines de l'Or Vert",desc:"Gagnez trois étoiles de réputation pour chaque région de villages adjacente à au moins trois types de terrains différents.",calc:(e,t)=>3*ae().filter((t=>t.type==de.VILLAGE.id&&t.cells.reduce(((t,n)=>t.concat(e[n].getNeighborsType())),[]).filter(((e,t,n)=>n.indexOf(e)==t&&e!=de.VILLAGE.id)).length>=3)).length},{id:37,type:"Village",name:"Remparts",desc:"Gagnez deux étoiles de réputation pour chaque case Village dans la deuxième plus grande régions de villages. En cas d'égalité, ne décomptez qu'une seule des régions concernées.",calc:(e,t)=>2*(ae().filter((e=>e.type==de.VILLAGE.id)).map((e=>e.cells.length)).sort(((e,t)=>t-e))[1]||0)},{id:38,type:"Plateau",name:"Frontières",desc:"Gagnez six étoiles de réputation pour chaque ligne complète et chaque colonne complète de cases remplies.",calc:(e,t)=>6*(t+e.length/t-e.filter((e=>e.type==de.EMPTY.id)).map((e=>[e.id%t+1,-Math.trunc(e.id/t)-1])).flat(1).filter(((e,t,n)=>n.indexOf(e)==t)).length)},{id:39,type:"Plateau",name:"Baronnie Perdue",desc:"Gagnez trois étoiles de réputation pour chaque case constituant l'un des bords du plus grand carré de cases remplies.",calc:(e,t)=>3*Math.max(...e.map((e=>e.type>0?1:0)).map(((e,n,l)=>{let i=n<t||n%t==0?e:e>0?1+Math.min(l[n-t],l[n-1],l[n-t-1]):e;return l[n]=i,i})))},{id:40,type:"Plateau",name:"Route Brisée",desc:"Gagnez trois étoiles de réputation pour chaque ligne diagonale de cases remplie qui touchent le bord gauche et le bord inférieur du parchemin.",calc:(e,t)=>{let n=0;for(let l=0;l<e.length/t;l++){let i=0;for(;i<t-l&&e[l*t+i*t+i].type!=de.EMPTY.id;)i++;i==t-l&&n++}return 3*n}},{id:41,type:"Plateau",name:"Chaudrons",desc:"Gagnez une étoile de réputation pour chaque case vierge entourée de ses quatre côtés par une case remplies ou par le bord du parchemin.",calc:(e,t)=>e.filter((e=>e.type==de.EMPTY.id&&e.isSurrounded())).length}];function Tt(e,t,n){const l=e.slice();return l[15]=t[n],l}function Ot(e,t,n){const l=e.slice();return l[18]=t[n],l}function Nt(e,t,n){const l=e.slice();return l[21]=t[n],l}function wt(e,t,n){const l=e.slice();return l[18]=t[n],l}function Rt(e,t,n){const l=e.slice();return l[21]=t[n],l}function qt(e,t,n){const l=e.slice();return l[18]=t[n],l}function It(e,t,n){const l=e.slice();return l[21]=t[n],l}function kt(e,t,n){const l=e.slice();return l[18]=t[n],l}function Pt(e,t,n){const l=e.slice();return l[21]=t[n],l}function Dt(t){let n,l;return n=new Ye({}),{c(){ne(n.$$.fragment)},m(e,t){le(n,e,t),l=!0},p:e,i(e){l||(Z(n.$$.fragment,e),l=!0)},o(e){ee(n.$$.fragment,e),l=!1},d(e){ie(n,e)}}}function Vt(t){let n,l,s,r,o,c,a,u,d,p,f,g,m,E,F,_,M,S,O,w,R,q,I,k,P,D,V,G,z,j,Y,B,H,W,K,J,Q,X,Z,ee,te,ne,le,ie,se,re,oe,ce,ae,ue,de,pe,ge,me,he,$e,ye,ve,be,Ee,xe,Fe,Le,Ae=St.map(Xt).filter(Zt),_e=[];for(let e=0;e<Ae.length;e+=1)_e[e]=zt(kt(t,Ae,e));let Me=St.map(en).filter(tn),Ce=[];for(let e=0;e<Me.length;e+=1)Ce[e]=Ut(qt(t,Me,e));let Se=St.map(nn).filter(ln),Te=[];for(let e=0;e<Se.length;e+=1)Te[e]=Bt(wt(t,Se,e));let Oe=St.map(sn).filter(rn),Ne=[];for(let e=0;e<Oe.length;e+=1)Ne[e]=Wt(Ot(t,Oe,e));let we=fe,Re=[];for(let e=0;e<we.length;e+=1)Re[e]=Kt(Tt(t,we,e));return{c(){n=b("div"),l=b("div"),s=b("form"),r=b("img"),c=x(),a=b("label"),a.textContent="Map title",u=x(),d=b("input"),p=x(),f=b("button"),f.textContent="Confirm",g=x(),m=b("form"),E=b("div"),E.innerHTML='<span class="letter svelte-5d67aa">A</span>',F=x(),_=b("label"),_.textContent="Scoring A",M=x(),S=b("select"),O=b("option"),O.textContent="Select scoring card";for(let e=0;e<_e.length;e+=1)_e[e].c();w=x(),R=b("button"),R.textContent="Confirm",q=x(),I=b("form"),k=b("div"),k.innerHTML='<span class="letter svelte-5d67aa">B</span>',P=x(),D=b("label"),D.textContent="Scoring B",V=x(),G=b("select"),z=b("option"),z.textContent="Select scoring card";for(let e=0;e<Ce.length;e+=1)Ce[e].c();j=x(),Y=b("button"),Y.textContent="Confirm",B=x(),H=b("form"),W=b("div"),W.innerHTML='<span class="letter svelte-5d67aa">C</span>',K=x(),J=b("label"),J.textContent="Scoring C",Q=x(),X=b("select"),Z=b("option"),Z.textContent="Select scoring card";for(let e=0;e<Te.length;e+=1)Te[e].c();ee=x(),te=b("button"),te.textContent="Confirm",ne=x(),le=b("form"),ie=b("div"),ie.innerHTML='<span class="letter svelte-5d67aa">D</span>',se=x(),re=b("label"),re.textContent="Scoring D",oe=x(),ce=b("select"),ae=b("option"),ae.textContent="Select scoring card";for(let e=0;e<Ne.length;e+=1)Ne[e].c();ue=x(),de=b("button"),de.textContent="Confirm",pe=x(),ge=b("form"),me=b("div"),me.innerHTML='<span class="letter svelte-5d67aa">D</span>',he=x(),$e=b("label"),$e.textContent="Map",ye=x(),ve=b("select"),be=b("option"),be.textContent="Select map template";for(let e=0;e<Re.length;e+=1)Re[e].c();Ee=x(),xe=b("button"),xe.textContent="Confirm",r.src!==(o="assets/img/map.svg")&&A(r,"src","assets/img/map.svg"),A(r,"alt",""),A(r,"class","logo svelte-5d67aa"),A(a,"for","title"),A(a,"class","label svelte-5d67aa"),A(d,"type","text"),A(d,"id","title"),A(d,"name","title"),A(d,"class","input"),A(f,"class","confirm"),A(s,"class","step svelte-5d67aa"),N(s,"current",0==t[0]),N(s,"passed",t[0]>0),A(E,"class","logo score svelte-5d67aa"),A(_,"for","title"),A(_,"class","label svelte-5d67aa"),O.selected=!0,O.disabled=!0,O.__value="",O.value=O.__value,S.required=!0,void 0===t[2][0]&&U((()=>t[7].call(S))),A(R,"class","confirm"),A(m,"class","step svelte-5d67aa"),N(m,"current",1==t[0]),N(m,"passed",t[0]>1),A(k,"class","logo score svelte-5d67aa"),A(D,"for","title"),A(D,"class","label svelte-5d67aa"),z.selected=!0,z.disabled=!0,z.__value="",z.value=z.__value,G.required=!0,void 0===t[2][1]&&U((()=>t[9].call(G))),A(Y,"class","confirm"),A(I,"class","step svelte-5d67aa"),N(I,"current",2==t[0]),N(I,"passed",t[0]>2),A(W,"class","logo score svelte-5d67aa"),A(J,"for","title"),A(J,"class","label svelte-5d67aa"),Z.selected=!0,Z.disabled=!0,Z.__value="",Z.value=Z.__value,X.required=!0,void 0===t[2][2]&&U((()=>t[11].call(X))),A(te,"class","confirm"),A(H,"class","step svelte-5d67aa"),N(H,"current",3==t[0]),N(H,"passed",t[0]>3),A(ie,"class","logo score svelte-5d67aa"),A(re,"for","title"),A(re,"class","label svelte-5d67aa"),ae.selected=!0,ae.disabled=!0,ae.__value="",ae.value=ae.__value,ce.required=!0,void 0===t[2][3]&&U((()=>t[13].call(ce))),A(de,"class","confirm"),A(le,"class","step svelte-5d67aa"),N(le,"current",4==t[0]),N(le,"passed",t[0]>4),A(me,"class","logo score svelte-5d67aa"),A($e,"for","title"),A($e,"class","label svelte-5d67aa"),be.selected=!0,be.disabled=!0,be.__value="Select map template",be.value=be.__value,ve.required=!0,void 0===t[3]&&U((()=>t[14].call(ve))),A(xe,"class","confirm"),A(ge,"class","step svelte-5d67aa"),N(ge,"current",5==t[0]),N(ge,"passed",t[0]>5),A(l,"class","stepper svelte-5d67aa"),A(n,"class","container svelte-5d67aa")},m(e,i){$(e,n,i),h(n,l),h(l,s),h(s,r),h(s,c),h(s,a),h(s,u),h(s,d),C(d,t[1]),h(s,p),h(s,f),h(l,g),h(l,m),h(m,E),h(m,F),h(m,_),h(m,M),h(m,S),h(S,O);for(let e=0;e<_e.length;e+=1)_e[e].m(S,null);T(S,t[2][0]),h(m,w),h(m,R),h(l,q),h(l,I),h(I,k),h(I,P),h(I,D),h(I,V),h(I,G),h(G,z);for(let e=0;e<Ce.length;e+=1)Ce[e].m(G,null);T(G,t[2][1]),h(I,j),h(I,Y),h(l,B),h(l,H),h(H,W),h(H,K),h(H,J),h(H,Q),h(H,X),h(X,Z);for(let e=0;e<Te.length;e+=1)Te[e].m(X,null);T(X,t[2][2]),h(H,ee),h(H,te),h(l,ne),h(l,le),h(le,ie),h(le,se),h(le,re),h(le,oe),h(le,ce),h(ce,ae);for(let e=0;e<Ne.length;e+=1)Ne[e].m(ce,null);T(ce,t[2][3]),h(le,ue),h(le,de),h(l,pe),h(l,ge),h(ge,me),h(ge,he),h(ge,$e),h(ge,ye),h(ge,ve),h(ve,be);for(let e=0;e<Re.length;e+=1)Re[e].m(ve,null);T(ve,t[3]),h(ge,Ee),h(ge,xe),Fe||(Le=[L(d,"input",t[5]),L(s,"submit",t[4]),L(S,"change",t[7]),L(m,"submit",t[4]),L(G,"change",t[9]),L(I,"submit",t[4]),L(X,"change",t[11]),L(H,"submit",t[4]),L(ce,"change",t[13]),L(le,"submit",t[4]),L(ve,"change",t[14]),L(ge,"submit",t[4])],Fe=!0)},p(e,t){if(2&t[0]&&d.value!==e[1]&&C(d,e[1]),1&t[0]&&N(s,"current",0==e[0]),1&t[0]&&N(s,"passed",e[0]>0),0&t){let n;for(Ae=St.map(Xt).filter(Zt),n=0;n<Ae.length;n+=1){const l=kt(e,Ae,n);_e[n]?_e[n].p(l,t):(_e[n]=zt(l),_e[n].c(),_e[n].m(S,null))}for(;n<_e.length;n+=1)_e[n].d(1);_e.length=Ae.length}if(4&t[0]&&T(S,e[2][0]),1&t[0]&&N(m,"current",1==e[0]),1&t[0]&&N(m,"passed",e[0]>1),0&t){let n;for(Me=St.map(en).filter(tn),n=0;n<Me.length;n+=1){const l=qt(e,Me,n);Ce[n]?Ce[n].p(l,t):(Ce[n]=Ut(l),Ce[n].c(),Ce[n].m(G,null))}for(;n<Ce.length;n+=1)Ce[n].d(1);Ce.length=Me.length}if(4&t[0]&&T(G,e[2][1]),1&t[0]&&N(I,"current",2==e[0]),1&t[0]&&N(I,"passed",e[0]>2),0&t){let n;for(Se=St.map(nn).filter(ln),n=0;n<Se.length;n+=1){const l=wt(e,Se,n);Te[n]?Te[n].p(l,t):(Te[n]=Bt(l),Te[n].c(),Te[n].m(X,null))}for(;n<Te.length;n+=1)Te[n].d(1);Te.length=Se.length}if(4&t[0]&&T(X,e[2][2]),1&t[0]&&N(H,"current",3==e[0]),1&t[0]&&N(H,"passed",e[0]>3),0&t){let n;for(Oe=St.map(sn).filter(rn),n=0;n<Oe.length;n+=1){const l=Ot(e,Oe,n);Ne[n]?Ne[n].p(l,t):(Ne[n]=Wt(l),Ne[n].c(),Ne[n].m(ce,null))}for(;n<Ne.length;n+=1)Ne[n].d(1);Ne.length=Oe.length}if(4&t[0]&&T(ce,e[2][3]),1&t[0]&&N(le,"current",4==e[0]),1&t[0]&&N(le,"passed",e[0]>4),0&t){let n;for(we=fe,n=0;n<we.length;n+=1){const l=Tt(e,we,n);Re[n]?Re[n].p(l,t):(Re[n]=Kt(l),Re[n].c(),Re[n].m(ve,null))}for(;n<Re.length;n+=1)Re[n].d(1);Re.length=we.length}8&t[0]&&T(ve,e[3]),1&t[0]&&N(ge,"current",5==e[0]),1&t[0]&&N(ge,"passed",e[0]>5)},i:e,o:e,d(e){e&&y(n),v(_e,e),v(Ce,e),v(Te,e),v(Ne,e),v(Re,e),Fe=!1,i(Le)}}}function Gt(t){let n,l,i=t[21].name+"";return{c(){n=b("option"),l=E(i),n.__value=t[21],n.value=n.__value},m(e,t){$(e,n,t),h(n,l)},p:e,d(e){e&&y(n)}}}function zt(e){let t;function n(...t){return e[6](e[18],...t)}let l=St.filter(n),i=[];for(let t=0;t<l.length;t+=1)i[t]=Gt(Pt(e,l,t));return{c(){t=b("optgroup");for(let e=0;e<i.length;e+=1)i[e].c();A(t,"label",e[18])},m(e,n){$(e,t,n);for(let e=0;e<i.length;e+=1)i[e].m(t,null)},p(s,r){if(e=s,0&r){let s;for(l=St.filter(n),s=0;s<l.length;s+=1){const n=Pt(e,l,s);i[s]?i[s].p(n,r):(i[s]=Gt(n),i[s].c(),i[s].m(t,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=l.length}},d(e){e&&y(t),v(i,e)}}}function jt(t){let n,l,i=t[21].name+"";return{c(){n=b("option"),l=E(i),n.__value=t[21],n.value=n.__value},m(e,t){$(e,n,t),h(n,l)},p:e,d(e){e&&y(n)}}}function Ut(e){let t;function n(...t){return e[8](e[18],...t)}let l=St.filter(n),i=[];for(let t=0;t<l.length;t+=1)i[t]=jt(It(e,l,t));return{c(){t=b("optgroup");for(let e=0;e<i.length;e+=1)i[e].c();A(t,"label",e[18])},m(e,n){$(e,t,n);for(let e=0;e<i.length;e+=1)i[e].m(t,null)},p(s,r){if(e=s,0&r){let s;for(l=St.filter(n),s=0;s<l.length;s+=1){const n=It(e,l,s);i[s]?i[s].p(n,r):(i[s]=jt(n),i[s].c(),i[s].m(t,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=l.length}},d(e){e&&y(t),v(i,e)}}}function Yt(t){let n,l,i=t[21].name+"";return{c(){n=b("option"),l=E(i),n.__value=t[21],n.value=n.__value},m(e,t){$(e,n,t),h(n,l)},p:e,d(e){e&&y(n)}}}function Bt(e){let t;function n(...t){return e[10](e[18],...t)}let l=St.filter(n),i=[];for(let t=0;t<l.length;t+=1)i[t]=Yt(Rt(e,l,t));return{c(){t=b("optgroup");for(let e=0;e<i.length;e+=1)i[e].c();A(t,"label",e[18])},m(e,n){$(e,t,n);for(let e=0;e<i.length;e+=1)i[e].m(t,null)},p(s,r){if(e=s,0&r){let s;for(l=St.filter(n),s=0;s<l.length;s+=1){const n=Rt(e,l,s);i[s]?i[s].p(n,r):(i[s]=Yt(n),i[s].c(),i[s].m(t,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=l.length}},d(e){e&&y(t),v(i,e)}}}function Ht(t){let n,l,i=t[21].name+"";return{c(){n=b("option"),l=E(i),n.__value=t[21],n.value=n.__value},m(e,t){$(e,n,t),h(n,l)},p:e,d(e){e&&y(n)}}}function Wt(e){let t;function n(...t){return e[12](e[18],...t)}let l=St.filter(n),i=[];for(let t=0;t<l.length;t+=1)i[t]=Ht(Nt(e,l,t));return{c(){t=b("optgroup");for(let e=0;e<i.length;e+=1)i[e].c();A(t,"label",e[18])},m(e,n){$(e,t,n);for(let e=0;e<i.length;e+=1)i[e].m(t,null)},p(s,r){if(e=s,0&r){let s;for(l=St.filter(n),s=0;s<l.length;s+=1){const n=Nt(e,l,s);i[s]?i[s].p(n,r):(i[s]=Ht(n),i[s].c(),i[s].m(t,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=l.length}},d(e){e&&y(t),v(i,e)}}}function Kt(t){let n,l,i=t[15].name+"";return{c(){n=b("option"),l=E(i),n.__value=t[15],n.value=n.__value},m(e,t){$(e,n,t),h(n,l)},p:e,d(e){e&&y(n)}}}function Jt(e){let t,n,l,i;const s=[Vt,Dt],r=[];function o(e,t){return e[0]<Qt?0:1}return t=o(e),n=r[t]=s[t](e),{c(){n.c(),l=F()},m(e,n){r[t].m(e,n),$(e,l,n),i=!0},p(e,i){let c=t;t=o(e),t===c?r[t].p(e,i):(Q(),ee(r[c],1,1,(()=>{r[c]=null})),X(),n=r[t],n?n.p(e,i):(n=r[t]=s[t](e),n.c()),Z(n,1),n.m(l.parentNode,l))},i(e){i||(Z(n),i=!0)},o(e){ee(n),i=!1},d(e){r[t].d(e),e&&y(l)}}}let Qt=6;const Xt=e=>e.type,Zt=(e,t,n)=>n.indexOf(e)==t,en=e=>e.type,tn=(e,t,n)=>n.indexOf(e)==t,nn=e=>e.type,ln=(e,t,n)=>n.indexOf(e)==t,sn=e=>e.type,rn=(e,t,n)=>n.indexOf(e)==t;function on(e,t,n){let l,i,s;a(e,ve,(e=>n(1,l=e))),a(e,be,(e=>n(2,i=e))),a(e,me,(e=>n(3,s=e)));let r=0;return[r,l,i,s,e=>{e.preventDefault(),n(0,r++,r)},function(){l=this.value,ve.set(l)},(e,t)=>t.type==e,function(){i[0]=O(this),be.set(i)},(e,t)=>t.type==e,function(){i[1]=O(this),be.set(i)},(e,t)=>t.type==e,function(){i[2]=O(this),be.set(i)},(e,t)=>t.type==e,function(){i[3]=O(this),be.set(i)},function(){s=O(this),me.set(s)}]}class cn extends re{constructor(e){super(),se(this,e,on,Jt,r,{},[-1,-1])}}function an(e){let t,n;return t=new cn({}),{c(){ne(t.$$.fragment)},m(e,l){le(t,e,l),n=!0},i(e){n||(Z(t.$$.fragment,e),n=!0)},o(e){ee(t.$$.fragment,e),n=!1},d(e){ie(t,e)}}}function un(e){let t,n;return t=new Ct({}),{c(){ne(t.$$.fragment)},m(e,l){le(t,e,l),n=!0},i(e){n||(Z(t.$$.fragment,e),n=!0)},o(e){ee(t.$$.fragment,e),n=!1},d(e){ie(t,e)}}}function dn(e){let t,n,l,i,s,r;const o=[un,an],c=[];function a(e,t){return e[0]?1:0}return n=a(e),l=c[n]=o[n](e),s=new At({}),{c(){t=b("div"),l.c(),i=x(),ne(s.$$.fragment)},m(e,l){$(e,t,l),c[n].m(t,null),h(t,i),le(s,t,null),r=!0},p(e,[s]){let r=n;n=a(e),n!==r&&(Q(),ee(c[r],1,1,(()=>{c[r]=null})),X(),l=c[n],l||(l=c[n]=o[n](e),l.c()),Z(l,1),l.m(t,i))},i(e){r||(Z(l),Z(s.$$.fragment,e),r=!0)},o(e){ee(l),ee(s.$$.fragment,e),r=!1},d(e){e&&y(t),c[n].d(),ie(s)}}}function pn(e,t,n){let l;return a(e,Ne,(e=>n(0,l=e))),[l]}return new class extends re{constructor(e){super(),se(this,e,pn,dn,r,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
